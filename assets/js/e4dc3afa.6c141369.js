"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[350],{1152:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(5861),a=n(7757),r=n.n(a),o=n(7294),l=n(9483),s=n(9669),c=n.n(s),d=n(1721),u=n(2118),m=n(6214),f=n(4639),h=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,o,l,s,d,u,m;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new RegExp(/https:\/\/github.com\/(.+?)\/(.+?)\/blob\/(.+?)\/(.+\.ipynb)/),i=t.match(n),a=i[1],o=i[2],l=i[3],s=i[4],d="https://api.github.com/repos/"+a+"/"+o+"/contents/"+s+"?ref="+l,e.next=6,c().get(d);case 6:return e.next=8,e.sent.data;case 8:return u=e.sent,r=JSON.parse((p=u.content,decodeURIComponent(atob(p).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))),f=void 0,h=void 0,f=r.metadata,h="Wolfram Language"==f.kernelspec.language?"mathematica":f.kernelspec.language,f.kernelspec.language=h,m={cells:r.cells.map((function(e){if("markdown"==e.cell_type){var t=e.source.join("").trim().replace(/(\${1,2})((?:\\.|[\s\S])*?)\1/g,(function(e,t,n){return t+n.replace(/\r?\n/g,"")+t}));return{cell_type:e.cell_type,id:e.id,metadata:e.metadata,source:t.split(/(\r\n|\n|\r)/)}}return e})),metadata:f,nbformat:r.nbformat,nbformat_minor:r.nbformat_minor},console.log(m),e.abrupt("return",m);case 12:case"end":return e.stop()}var r,f,h,p}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return o.createElement(d.D,{remarkPlugins:[u.Z],rehypePlugins:[m.Z],children:e.source})};function v(e){var t=e.notebookURL,n=o.useState(null),i=n[0],a=n[1];return o.useEffect((function(){h(t).then(a)}),[t]),o.createElement("div",{className:"NotebookViewer"},null===i?"Loading notebook...":o.createElement(l.Z,{source:i,code:f.Z,markdown:p}))}},2790:function(e,t,n){var i=n(5068),a=n(7294),r=n(1146),o=function(e){function t(){return e.apply(this,arguments)||this}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.embedding=(0,r.embed)(this.props.url,this.el,{allowInteract:!0,showRenderProgress:!0})},n.componentWillUnmount=function(){this.embedding.then((function(e){return e.detach()}))},n.render=function(){var e=this;return a.createElement("div",{className:"NotebookEmbed",ref:function(t){return e.el=t}})},t}(a.Component);t.Z=o},3891:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return p},default:function(){return _},frontMatter:function(){return h},metadata:function(){return v},toc:function(){return b}});var i=n(7462),a=n(3366),r=n(7294),o=n(3905),l=(n(2790),n(1152),n(2543));function s(e,t){const n=e.module();return n.variable(t()).define(["md"],(function(e){return e`# Color Legend

A simple legend for a [color scale](/@d3/color-schemes). Supports [continuous](/@d3/continuous-scales), [sequential](/@d3/sequential-scales), [diverging](/@d3/diverging-scales), [quantize, quantile, threshold](/@d3/quantile-quantize-and-threshold-scales) and [ordinal](/@d3/d3-scaleordinal) scales. To use:

~~~js
import {Legend, Swatches} from "@d3/color-legend"
~~~

Then call the legend function as shown below. (For ordinal scales, also consider the swatches function.)`})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleSequential([0,100],t.interpolateViridis),{title:"Temperature (\xb0F)"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleSequentialSqrt([0,1],t.interpolateTurbo),{title:"Speed (kts)"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleDiverging([-.1,0,.1],t.interpolatePiYG),{title:"Daily change",tickFormat:"+%"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleDivergingSqrt([-.1,0,.1],t.interpolateRdBu),{title:"Daily change",tickFormat:"+%"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleSequentialLog([1,100],t.interpolateBlues),{title:"Energy (joules)",ticks:10})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleSequentialQuantile(t.range(100).map((()=>Math.random()**2)),t.interpolateBlues),{title:"Quantile",tickFormat:".2f"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleSqrt([-100,0,100],["blue","white","red"]),{title:"Temperature (\xb0C)"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleQuantize([1,10],t.schemePurples[9]),{title:"Unemployment rate (%)"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleQuantile(t.range(1e3).map(t.randomNormal(100,20)),t.schemeSpectral[9]),{title:"Height (cm)",tickFormat:".0f"})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleThreshold([2.5,3.1,3.5,3.9,6,7,8,9.5],t.schemeRdBu[9]),{title:"Unemployment rate (%)",tickSize:0})})),n.variable(t()).define(["Legend","d3"],(function(e,t){return e(t.scaleOrdinal(["<10","10-19","20-29","30-39","40-49","50-59","60-69","70-79","\u226580"],t.schemeSpectral[10]),{title:"Age (years)",tickSize:0})})),n.variable(t()).define(["md"],(function(e){return e`But wait, thereâ€™s more!

How about swatches for ordinal color scales? Both variable-width swatches and [column layout](https://developer.mozilla.org/en-US/docs/Web/CSS/columns) are supported.`})),n.variable(t()).define(["Swatches","d3"],(function(e,t){return e(t.scaleOrdinal(["blueberries","oranges","apples"],t.schemeCategory10))})),n.variable(t()).define(["Swatches","d3"],(function(e,t){return e(t.scaleOrdinal(["Wholesale and Retail Trade","Manufacturing","Leisure and hospitality","Business services","Construction","Education and Health","Government","Finance","Self-employed","Other"],t.schemeTableau10),{columns:"180px"})})),n.variable(t()).define(["md"],(function(e){return e`---

## Implementation`})),n.variable(t("Legend")).define("Legend",["d3"],(function(e){return function(t,{title:n,tickSize:i=6,width:a=320,height:r=44+i,marginTop:o=18,marginRight:l=0,marginBottom:s=16+i,marginLeft:c=0,ticks:d=a/64,tickFormat:u,tickValues:m}={}){function f(e,t=256){const n=document.createElement("canvas");n.width=t,n.height=1;const i=n.getContext("2d");for(let a=0;a<t;++a)i.fillStyle=e(a/(t-1)),i.fillRect(a,0,1,1);return n}const h=e.create("svg").attr("width",a).attr("height",r).attr("viewBox",[0,0,a,r]).style("overflow","visible").style("display","block");let p,v=e=>e.selectAll(".tick line").attr("y1",o+s-r);if(t.interpolate){const n=Math.min(t.domain().length,t.range().length);p=t.copy().rangeRound(e.quantize(e.interpolate(c,a-l),n)),h.append("image").attr("x",c).attr("y",o).attr("width",a-c-l).attr("height",r-o-s).attr("preserveAspectRatio","none").attr("xlink:href",f(t.copy().domain(e.quantize(e.interpolate(0,1),n))).toDataURL())}else if(t.interpolator){if(p=Object.assign(t.copy().interpolator(e.interpolateRound(c,a-l)),{range:()=>[c,a-l]}),h.append("image").attr("x",c).attr("y",o).attr("width",a-c-l).attr("height",r-o-s).attr("preserveAspectRatio","none").attr("xlink:href",f(t.interpolator()).toDataURL()),!p.ticks){if(void 0===m){const n=Math.round(d+1);m=e.range(n).map((i=>e.quantile(t.domain(),i/(n-1))))}"function"!=typeof u&&(u=e.format(void 0===u?",f":u))}}else if(t.invertExtent){const n=t.thresholds?t.thresholds():t.quantiles?t.quantiles():t.domain(),i=void 0===u?e=>e:"string"==typeof u?e.format(u):u;p=e.scaleLinear().domain([-1,t.range().length-1]).rangeRound([c,a-l]),h.append("g").selectAll("rect").data(t.range()).join("rect").attr("x",((e,t)=>p(t-1))).attr("y",o).attr("width",((e,t)=>p(t)-p(t-1))).attr("height",r-o-s).attr("fill",(e=>e)),m=e.range(n.length),u=e=>i(n[e],e)}else p=e.scaleBand().domain(t.domain()).rangeRound([c,a-l]),h.append("g").selectAll("rect").data(t.domain()).join("rect").attr("x",p).attr("y",o).attr("width",Math.max(0,p.bandwidth()-1)).attr("height",r-o-s).attr("fill",t),v=()=>{};return h.append("g").attr("transform",`translate(0,${r-s})`).call(e.axisBottom(p).ticks(d,"string"==typeof u?u:void 0).tickFormat("function"==typeof u?u:void 0).tickSize(i).tickValues(m)).call(v).call((e=>e.select(".domain").remove())).call((e=>e.append("text").attr("x",c).attr("y",o+s-r-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(n))),h.node()}})),n.variable(t("legend")).define("legend",["Legend"],(function(e){return function({color:t,...n}){return e(t,n)}})),n.variable(t("Swatches")).define("Swatches",["d3","htl"],(function(e,t){return function(n,{columns:i=null,format:a,unknown:r,swatchSize:o=15,swatchWidth:l=o,swatchHeight:s=o,marginLeft:c=0}={}){const d=`-swatches-${Math.random().toString(16).slice(2)}`,u=null==r?void 0:n.unknown(),m=null==u||u===e.scaleImplicit?[]:[u],f=n.domain().concat(m);return void 0===a&&(a=e=>e===u?r:e),null!==i?t.html`<div style="display: flex; align-items: center; margin-left: ${+c}px; min-height: 33px; font: 10px sans-serif;">
  <style>

.${d}-item {
  break-inside: avoid;
  display: flex;
  align-items: center;
  padding-bottom: 1px;
}

.${d}-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - ${+l}px - 0.5em);
}

.${d}-swatch {
  width: ${+l}px;
  height: ${+s}px;
  margin: 0 0.5em 0 0;
}

  </style>
  <div style=${{width:"100%",columns:i}}>${f.map((e=>{const i=`${a(e)}`;return t.html`<div class=${d}-item>
      <div class=${d}-swatch style=${{background:n(e)}}></div>
      <div class=${d}-label title=${i}>${i}</div>
    </div>`}))}
  </div>
</div>`:t.html`<div style="display: flex; align-items: center; min-height: 33px; margin-left: ${+c}px; font: 10px sans-serif;">
  <style>

.${d} {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}

.${d}::before {
  content: "";
  width: ${+l}px;
  height: ${+s}px;
  margin-right: 0.5em;
  background: var(--color);
}

  </style>
  <div>${f.map((e=>t.html`<span class="${d}" style="--color: ${n(e)}">${a(e)}</span>`))}</div>`}})),n.variable(t("swatches")).define("swatches",["Swatches"],(function(e){return function({color:t,...n}){return e(t,n)}})),n}function c(e,t){const n=e.module();n.variable(t()).define(["md"],(function(e){return e`# Lattice Vibrations - 3.001 Demo
#### Georgios Varnavides, Amina Matt, Craig Carter`})),n.variable(t()).define(["md"],(function(e){return e`Let's start by looking at a (finite) one-dimensional lattice with fixed ends. We will consider two treatments:
1. Small amplitude vibrations
  - atoms interact only with their nearest neighbors
  - as if they're masses attached with springs (Harmonic approximation)
2. Larger amplitude vibrations (atoms interact via the Lennard-Jones potential)`})),n.variable(t()).define(["num_of_atoms","oscillation_magnitude_static","md"],(function(e,t,n){return n`### 1. Harmonic Approximation
We make a one-dimensional lattice with ${e+1} atoms and start the simulation by displacing the atoms using an initial sine-wave pattern.

__Note:__ We're exaggerating the displacements by a factor of ${Math.round(1/t)} for visual clarity.`})),n.variable(t("viewof restart_button_1d")).define("viewof restart_button_1d",["Inputs"],(function(e){return e.button("(re)Start Simulation")})),n.variable(t("restart_button_1d")).define("restart_button_1d",["Generators","viewof restart_button_1d"],((e,t)=>e.input(t))),n.variable(t("harmonic_animation")).define("harmonic_animation",["d3","DOM","chart_param","one_dimensional_lattice","one_dimensional_lattice_links","restart_button_1d","num_of_atoms","draw_nodes","oscillation_direction","oscillation_magnitude_static","invalidation"],(function(e,t,n,i,a,r,o,l,s,c,d){const u=e.select(t.svg(n.width,n.width/8)),m=i.map((e=>Object.create(e))),f=a.map((e=>Object.create(e))),h=r;let p=0;u.attr("viewBox",[-2.5,-2.5,o+5,5]);const v=e.forceSimulation(m).force("link",e.forceLink(f).distance(1).iterations(0)).alphaDecay(0).velocityDecay(0).dt(.5),[b,g]=l(u,m,null,!1,!1);return b.attr("opacity",(e=>null==e.fx?.5:1)).attr("fill",(e=>null==e.fx?"gray":"black")),v.on("tick",(()=>{(p++>750||0==h)&&v.stop(),"horizontal"==s?b.attr("cx",(e=>e.x+(e.x-e.index)/c)).attr("cy",(e=>e.y)):b.attr("cx",(e=>e.index)).attr("cy",(e=>(e.x-e.index)/c))})),d.then((()=>v.stop())),u.node()})),n.variable(t()).define(["md"],(function(e){return e`We chose an initial sine-wave displacement in anticipation of the behaviour being periodic in space (and time). In particular, we moved each atom from its equilibrium position by the function:`})),n.variable(t("sine_wave_plot")).define("sine_wave_plot",["Plot","chart_param","sine_wave"],(function(e,t,n){return e.plot({width:t.width,height:t.width/8,marginRight:40,x:{grid:!0,label:"Normalized position along chain \u2192"},y:{grid:!0,label:"\u2191 Normalized displacement"},marks:[e.line(n,{x:"x",y:"y"})]})})),n.variable(t()).define(["md"],(function(e){return e`What if we started with fewer/more 'nodes' along our initial displacement?
Change the value fo the sub-harmonic mode below to see how this influences the vibrations!`})),n.variable(t("viewof sub_harmonic")).define("viewof sub_harmonic",["Inputs"],(function(e){return e.range([1,6],{step:1,label:"Sub-harmonic",value:3})})),n.variable(t("sub_harmonic")).define("sub_harmonic",["Generators","viewof sub_harmonic"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],(function(e){return e`The visualization using horizontal displacements is hard to see. Let's instead plot the displacements of each atom away from its equilibrium position vertically. 

__Note:__ The physics is still in the horizontal direction!`})),n.variable(t("viewof oscillation_direction")).define("viewof oscillation_direction",["Inputs"],(function(e){return e.radio(["horizontal","vertical"],{label:"Oscillation direction",value:"horizontal"})})),n.variable(t("oscillation_direction")).define("oscillation_direction",["Generators","viewof oscillation_direction"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],(function(e){return e`### Dispersion Relations
We were running the above simulation for a fixed time, but notice how the behaviour is periodic in time. Let's write a helper function to extract that period and stop the simulation.

The function __compute_single_period()__ calculates one period of oscillation given a particular sub-harmonic mode number:`})),n.variable(t()).define(["compute_single_period","num_of_atoms","sub_harmonic","md"],(function(e,t,n,i){return i`For example it takes ${e(t,n)} (dimensionless) time-units to do a single periodic oscillation for the ${n}th sub-harmonic mode for ${t} atoms!

\`\`\`javascript
compute_single_period(num_of_atoms,sub_harmonic)
\`\`\`
${e(t,n)}`})),n.variable(t()).define(["num_of_atoms","tex","md"],(function(e,t,n){return n`Let's do this for all sub-harmonic modes in the range [${-e/2-5},${e+5}]   
and plot the frequency ${t`\left(\frac{2\pi}{\mathrm{period}}\right)`} against the wave-vector ${t`\left( \frac{2 \pi \times \mathrm{sub-harmonic\;mode}}{\mathrm{number\;of\;atoms}}\right)`}  
for each sub-harmonic mode:`})),n.variable(t("viewof dispersion_plot")).define("viewof dispersion_plot",["mouseover_selection","vl","dispersion_data","chart_param"],(function(e,t,n,i){let a=e;return t.markCircle({size:50}).data(n).params(a).encode(t.x().fieldQ("wavevector"),t.y().fieldQ("frequency"),t.color().if(a,t.value("steelblue")).value("lightgrey")).width(i.width/2).render()})),n.variable(t("dispersion_plot")).define("dispersion_plot",["Generators","viewof dispersion_plot"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],(function(e){return e`What we just plotted is called a dispersion relation. 

Let's get a sense of what it means for our lattice vibrations. Try hovering over one of the points in the dispersion plot and notice how the wavelength (inversely related to the wavevector) and frequency (inversely related to the period) change below!`})),n.variable(t("dispersion_animation")).define("dispersion_animation",["d3","DOM","chart_param","make_one_dimensional_lattice","num_of_atoms","dispersion_subharmonic","oscillation_magnitude_static","draw_nodes","oscillation_direction","oscillation_magnitude","invalidation"],(function(e,t,n,i,a,r,o,l,s,c,d){const u=e.select(t.svg(n.width,n.width/8)),[m,f]=i(a,r,o);let h=0;u.attr("viewBox",[-2.5,-2.5,a+5,5]);const p=e.forceSimulation(m).force("link",e.forceLink(f).distance(1).iterations(0)).alphaDecay(0).velocityDecay(0).dt(.25),[v,b]=l(u,m,null,!1,!1);return v.attr("opacity",(e=>null==e.fx?.5:1)).attr("fill",(e=>null==e.fx?"gray":"black")),p.on("tick",(()=>{h++>750&&p.stop(),"horizontal"==s?v.attr("cx",(e=>e.x+(e.x-e.index)/c)).attr("cy",(e=>e.y)):v.attr("cx",(e=>e.index)).attr("cy",(e=>(e.x-e.index)/c))})),d.then((()=>p.stop())),u.node()})),n.variable(t()).define(["dispersion_subharmonic","tex","md"],(function(e,t,n){return n`Sub-harmonic mode:${e}

The dispersion behaviour is periodic in the domain ${t`\left(-\frac{\pi}{a},\frac{\pi}{a}\right)`}, where _a_ is the lattice spacing (${t`a=1`} in our case).

This periodic domain is called the __first Brillouin zone__ and it turns out to be a very useful property in materials science.`})),n.variable(t()).define(["md"],(function(e){return e`### 2. Lennard Jones Vibrations
Let's run the same 1D-lattice simulation using the Lennard-Jones potential instead.
This means our particles interact according to second, third, etc. nearest neighbor interactions - making the behaviour nonlinear!`})),n.variable(t("viewof restart_button_1d_lj")).define("viewof restart_button_1d_lj",["Inputs"],(function(e){return e.button("(re)Start Simulation")})),n.variable(t("restart_button_1d_lj")).define("restart_button_1d_lj",["Generators","viewof restart_button_1d_lj"],((e,t)=>e.input(t))),n.variable(t("lennard_jones_animation")).define("lennard_jones_animation",["d3","DOM","chart_param","restart_button_1d_lj","make_one_dimensional_lattice","num_of_atoms","sub_harmonic","oscillation_magnitude","draw_nodes","colorScale1D","oscillation_direction","invalidation"],(function(e,t,n,i,a,r,o,l,s,c,d,u){const m=e.select(t.svg(n.width,n.height/3)),f=i,[h,p]=a(r,o,l);let v=0;m.attr("viewBox",[-2.5,-2.5,r+5,5]);const b=e.forceSimulation(h).force("lennard-jones-BH",e.forceLennardJonesPotential().theta(.25)).alphaDecay(0).velocityDecay(0).dt(.025),[g,_]=s(m,h,null,!1,!1,c);return b.on("tick",(()=>{(v++>750||0==f)&&b.stop(),"horizontal"==d?g.attr("cx",(e=>e.x+(e.x-e.index)/l)).attr("cy",(e=>e.y)).attr("fill",(e=>c(e.energy))):g.attr("cx",(e=>e.index)).attr("cy",(e=>(e.x-e.index)/l)).attr("fill",(e=>c(e.energy)))})),u.then((()=>b.stop())),m.node()})),n.variable(t("viewof oscillation_magnitude")).define("viewof oscillation_magnitude",["Inputs"],(function(e){return e.range([.0125,.05],{step:.0125,label:"Oscillation Magnitude",value:.0125})})),n.variable(t("oscillation_magnitude")).define("oscillation_magnitude",["Generators","viewof oscillation_magnitude"],((e,t)=>e.input(t))),n.variable(t()).define(["md"],(function(e){return e`The larger the initial oscillation magnitude - the further away from the harmonic approximation we sample, and thus the more nonlinear behaviour. Try running the simulation above using larger and larger oscillation magnitudes.  

__Note:__ The actual oscillation is normalized to be the same in all cases (to allow easier comparison), but notice how the vibrations quickly become nonlinear for larger values!`})),n.variable(t()).define(["legend","colorScale1D","chart_param"],(function(e,t,n){return e({color:t,title:"Lennard-Jones energy 1D",width:n.width/2})})),n.variable(t()).define(["md"],(function(e){return e`__Note:__ Finally, notice we've colored each atom according to their Lennard-Jones potential energy.
The colors fluctuate as atoms move from high (red) to low (blue) energies, but our fixed edge atoms appear to be mostly in a state of higher energy.

This because they only have one nearest neighbor (as opposed to two like the 'bulk' atoms), and give us a hint as to the physical origin of surface tension!`})),n.variable(t()).define(["md"],(function(e){return e`---

---

---
`})),n.variable(t()).define(["md"],(function(e){return e`## Utility Functions`})),n.variable(t("d3")).define("d3",["require"],(function(e){return e("d3@6","d3-force-md@2.2.2")}));const i=e.module(s);return n.import("legend",i),n.variable(t("sine_wave")).define("sine_wave",["sub_harmonic"],(function(e){return[...Array(201)].map(((t,n)=>({x:n/200,y:Math.sin(e*(2*Math.PI*n)/200)})))})),n.variable(t("num_of_atoms")).define("num_of_atoms",(function(){return 50})),n.variable(t("oscillation_magnitude_static")).define("oscillation_magnitude_static",(function(){return.0125})),n.variable(t("one_dimensional_lattice")).define("one_dimensional_lattice",["num_of_atoms","oscillation_magnitude_static","sub_harmonic"],(function(e,t,n){return[...Array(e+1)].map(((i,a)=>({x:a+t*Math.sin(n*(2*Math.PI*a)/e),y:0,fy:0}))).map((t=>0==t.x||t.x==e?{x:t.x,fx:t.x,y:t.y,fy:t.y}:t))})),n.variable(t("one_dimensional_lattice_links")).define("one_dimensional_lattice_links",["num_of_atoms"],(function(e){return[...Array(e)].map(((e,t)=>({source:t,target:t+1})))})),n.variable(t("make_one_dimensional_lattice")).define("make_one_dimensional_lattice",(function(){return function(e,t,n){return[[...Array(e+1)].map(((i,a)=>({x:a+n*Math.sin(t*(2*Math.PI*a)/e),y:0,fy:0}))).map((t=>0==t.x||t.x==e?{x:t.x,fx:t.x,y:t.y,fy:t.y}:t)),[...Array(e)].map(((e,t)=>({source:t,target:t+1})))]}})),n.variable(t("chart_param")).define("chart_param",(function(){return{width:900,height:500,margin:{top:10,right:10,bottom:10,left:10,center:150}}})),n.variable(t("draw_nodes")).define("draw_nodes",(function(){return(e,t,n,i,a,r)=>{null==r&&(r=e=>null);let o=null;n&&(o=e.selectAll(".edge").data(n).enter().append("line").classed("edge",!0).attr("x1",(e=>t[e.source].x)).attr("y1",(e=>t[e.source].y)).attr("x2",(e=>t[e.target].x)).attr("y2",(e=>t[e.target].y)).style("stroke",a?"#bbb":"none"));return[e.selectAll(".node").data(t).enter().append("circle").classed("node",!0).attr("cx",(e=>e.x)).attr("cy",(e=>e.y)).attr("fill",(e=>r(e.energy))).attr("r",(e=>i?e.r:.5)),o]}})),n.variable(t("compute_single_period")).define("compute_single_period",["oscillation_magnitude_static","make_one_dimensional_lattice","d3"],(function(e,t,n){return function(i,a,r,o,l){if(0==a||Math.abs(a)==i)return 1/0;Math.abs(a)==i/2&&(a+=1),null==r&&(r=e),null==o&&(o=.0075),null==l&&(l=5e3);let s,c,d=[r],u=0;[s,c]=t(i,a,r);const m=s.map((e=>Object.create(e))),f=c.map((e=>Object.create(e))),h=n.forceSimulation(m).force("link",n.forceLink(f).distance(1).iterations(0)).alphaDecay(0).velocityDecay(0).dt(o);do{u++,h.tick();const e=m.map((e=>e.x-e.index));d.push(e.reduce(((e,t)=>e+t*t)))}while(u<l&&d[u]-d[u-1]<0);return h.stop(),(u-1)*o}})),n.variable(t("dispersion_data")).define("dispersion_data",["d3","num_of_atoms","compute_single_period"],(function(e,t,n){return e.range(-t/2-5,t+5).map((e=>({wavevector:2*Math.PI*e/t,frequency:2*Math.PI/n(t,e)})))})),n.variable(t("mouseover_selection")).define("mouseover_selection",["vl"],(function(e){return e.selectPoint().on("mouseover").fields("wavevector").nearest("true")})),n.variable(t("dispersion_mouseover")).define("dispersion_mouseover",["Generators","mouseover_selection","dispersion_plot"],(function(e,t,n){return e.observe((e=>{e([]);const i=t.name(),a=(t,n)=>e(n?.vlPoint?.or??[]);return n.addSignalListener(i,a),()=>n.removeSignalListener(i,a)[0]}))})),n.variable(t("dispersion_subharmonic")).define("dispersion_subharmonic",["dispersion_mouseover","num_of_atoms"],(function(e,t){return 0==e.length?0:"wavevector"in e[0]?Math.round(e[0].wavevector*t/(2*Math.PI)):0})),n.variable(t("colorScale1D")).define("colorScale1D",["d3"],(function(e){return e.scaleSequential(e.interpolateTurbo).domain([-3.075,-3.025])})),n}var d=function(){var e=(0,r.useRef)();return(0,r.useEffect)((function(){var t=new l.r_;return t.module(c,l.lj.into(e.current)),function(){return t.dispose()}}),[]),r.createElement(r.Fragment,null,r.createElement("div",{ref:e}),r.createElement("p",null,"Credit: ",r.createElement("a",{href:"https://observablehq.com/@gvarnavi/lattice-vibrations-lj"},"Lattice Vibrations - 3.001 Demo by Georgios Varnavides")))},u=n(9877),m=n(8215),f=["components"],h={id:"lattice-vibrations-lj",sidebar_position:2,title:"1D Lattice Vibrations",hide_title:!0},p=void 0,v={unversionedId:"demo/lattice-vibrations-lj",id:"demo/lattice-vibrations-lj",title:"1D Lattice Vibrations",description:"",source:"@site/docs/3001-demo/lattice-vibrations.mdx",sourceDirName:"3001-demo",slug:"/demo/lattice-vibrations-lj",permalink:"/3029/docs/demo/lattice-vibrations-lj",editUrl:"https://github.com/dmse-mit/3029/edit/main/website/docs/3001-demo/lattice-vibrations.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"lattice-vibrations-lj",sidebar_position:2,title:"1D Lattice Vibrations",hide_title:!0},sidebar:"tutorialSidebar",previous:{title:"Lennard Jones Potential",permalink:"/3029/docs/demo/lennard-jones-potential"},next:{title:"Surface Energy",permalink:"/3029/docs/demo/surface-energy-lj"}},b=[],g={toc:b};function _(e){var t=e.components,n=(0,a.Z)(e,f);return(0,o.kt)("wrapper",(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(u.Z,{lazy:!0,mdxType:"Tabs"},(0,o.kt)(m.Z,{value:"observable",label:"JS - Observable",default:!0,mdxType:"TabItem"},(0,o.kt)(d,{mdxType:"LatticeVibrationsLj"}))))}_.isMDXComponent=!0}}]);